---
layout: post
title: "AWK is a Turing-Complete Language"
tags: [Software, Languages, AWK]
summary: So Let's Learn It
---
{% include JB/setup %}

AWK is a Turing-complete language. So let's dive in.

The approach I'm going to take here it to introduce all the major language features via example. So, no, this isn't a complete language reference. If you want that, look [here](https://www.grymoire.com/Unix/Awk.html).


## Awk vs Mawk vs Gawk

There are various flavors of `awk`.

If you're nearly any flavor of linux, `awk` almost certainly comes installed. Try typing "`man awk`" to see what flavor of awk you have. You probably have MAWK or GAWK (GNU AWK). They have a very similar API and both are fine. I *think* GAWK is somewhat more consistent across versions and platforms.


## Example 1 - Field Separators

For our first example, let's parse a little CSV file. This one shows the radiation dosage from various sources in different units (`rad.csv`):

    source,dose (Sv),dose (BED)
    eating a banana,1.0E-7,1
    arm x-ray,1.0e-6,10
    dental x-ray,5.0e-6,50
    one day natural background,1.0e-5,100
    flight from LA to New york,4.e-5,400
    mammogram,4e-4,4000
    head CT scan,2.0e-3,20000
    chest CT scan,7.0e-3,70000
    max yearly radiation worker dose,5.0e-2,5e5
    lowest yearly dose linked to cancer,0.1,1e6
    usually fatal dase,4.0,4e7

The first column in this file is the source of radiation, let's grab that on the commandline:

    $ awk -F, '{print $1}' rad.csv
    source
    eating a banana
    arm x-ray
    dental x-ray
    one day natural background
    flight from LA to New york
    mammogram
    head CT scan
    chest CT scan
    max yearly radiation worker dose
    lowest yearly dose linked to cancer
    usually fatal dase

The second column in the file is the radiation from this source in the scientific unit Sieverts (Sv). Boring. The third column is the amount of radiation from each source in the far more useful Banana Equivalent Dosages (BED). How many bananas would you need to eat to get that high a dosage? Let's find out!

    $ awk -F "," '{print $1,"\t\t",$3}' rad.csv
    source 		 dose (BED)
    eating a banana 		 1
    arm x-ray 		 10
    dental x-ray 		 50
    one day natural background 		 100
    flight from LA to New york 		 400
    mammogram 		 4000
    head CT scan 		 20000
    chest CT scan 		 70000
    max yearly radiation worker dose 		 5e5
    lowest yearly dose linked to cancer 		 1e6
    usually fatal dase 		 4e7

Okay, a dental x-ray is 50 times as much radiation as eating a banana. That seems safe. A chest CT is 70,000 BEDs; probably don't do that too often.

But you would need to each 40 million bananas to get a lethal dose of radiation. Yeah, I feel pretty safe on that one.


## Example 2 - Arithmetic Expressions

TODO


## Example 3 - Arrays

TODO

## Example 4 - printf

TODO


## Example 5 - Numerical Functions

TODO


## Example 6 - String Functions

TODO


## Example 7 - User-Defined Functions

TODO
